import{d as H,a8 as J,H as P,r as y,C as k,o as Q,K as o,N as L,Q as D,M as u,O as d,L as n,aR as O,F as W,a4 as r,a as X,$ as h,a5 as z,R as M,S as V,aL as Y,Z as E,D as Z,X as B,_ as K}from"./index-6c642fe2.js";import{P as j}from"./index-f272d3ca.js";import{h as N}from"./index-fcf697e6.js";import{h as _}from"./web3-cc06f2a8.js";const R="data:image/png;base64,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",q=c=>(M("data-v-69f0cdd9"),c=c(),V(),c),G={class:"main"},$=q(()=>u("div",{class:"header-title"},"領取數量",-1)),ee={class:"header-title-claim"},ae={class:"detail-list-label"},te={key:0,class:"detail-list-data"},se=["onClick"],oe={key:0,class:"detail-list-data-icon",src:R},le=["onClick"],ne={key:0,class:"detail-list-data-icon",src:R},de=H({__name:"index",setup(c){const U=J(),e=P(()=>U.query),v=y(!1);console.log(e.value,"viewParams");const{redSpiderContract:m}=k(),T=[{key:"參與數量",value:e.value.amount},{key:"訂單編號",value:e.value.orderId},{key:"參與時間",value:e.value.startTime},{key:"領取時間",value:e.value.endTime},{key:"領取憑證",value:e.value.claimHash},{key:"參與憑證",value:e.value.createdHash}],g=t=>{window.open(`https://bscscan.com/tx/${t}`,"")},A=y(!1),x=async()=>{v.value=new Date(e.value.endTime).getTime()<new Date().getTime()&&Number(e.value.status)!==6,setTimeout(()=>{A.value=!1},200)},l=y(!1),f=async()=>{l.value=!0;const t=await m.getClaimStatus(e.value.orderId);if(console.log(t,"res"),t.status==="5"){l.value=!1,Z().update_orderStatusShow(!0),k().update_claimAmount(t.needAmount);return}else if(t.status==="2"){await F();return}else t.status==="3"&&await I()},F=async()=>{await m.claimContract(e.value.orderId).then(async t=>{try{await N({data:{hash:t},condition:{}})}catch(s){console.log(s)}new B().checkHash(t,"領取訂單",(s,i)=>{l.value=!1,s&&i.logs})}).catch(()=>{l.value=!1})},I=async()=>{await m.liquidateContract(e.value.orderId).then(async t=>{try{await N({data:{hash:t},condition:{}})}catch(s){console.log(s)}new B().checkHash(t,"領取賠付訂單",(s,i)=>{s&&i.logs&&(l.value=!1)})}).catch(()=>{l.value=!1})};return Q(()=>{v.value=new Date(e.value.endTime).getTime()<new Date().getTime()&&Number(e.value.status)!==6}),(t,s)=>{const i=z,S=j;return o(),L(S,{modelValue:A.value,"onUpdate:modelValue":s[1]||(s[1]=a=>A.value=a),class:"box",onRefresh:x},{default:D(()=>[u("div",G,[u("header",null,[$,u("div",ee,d(e.value.claimAmount)+" "+d(e.value.status==="4"?"RST":"USDT"),1)]),(o(),n(W,null,O(T,a=>{var p,w,C;return u("div",{class:Y(["detail-list",{"border-bottom":!0}]),key:a.value},[u("div",ae,d(a.key),1),a.key!=="領取憑證"&&a.key!=="參與憑證"?(o(),n("div",te,d(a.value),1)):a.key==="參與憑證"?(o(),n("div",{key:1,class:"detail-list-data",onClick:b=>g(a.value)},[h(d(E(_)(a.value))+" ",1),((p=a.value)==null?void 0:p.length)>1?(o(),n("img",oe)):r("",!0)],8,se)):(o(),n("div",{key:2,class:"detail-list-data",onClick:b=>g(a.value)},[h(d(((w=a.value)==null?void 0:w.length)>1?E(_)(a.value):"")+" ",1),((C=a.value)==null?void 0:C.length)>1?(o(),n("img",ne)):r("",!0)],8,le))])}),64)),v.value&&e.value.status==="2"?(o(),n("div",{key:0,onClick:f,class:"claim"}," 領取收益 ")):r("",!0),e.value.status==="3"?(o(),n("div",{key:1,onClick:f,class:"claim"}," 領取賠付 ")):r("",!0)]),X(i,{duration:0,show:l.value,"onUpdate:show":s[0]||(s[0]=a=>l.value=a),type:"loading"},{message:D(()=>[h("領取中...")]),_:1},8,["show"])]),_:1},8,["modelValue"])}}});const ve=K(de,[["__scopeId","data-v-69f0cdd9"]]);export{ve as default};
